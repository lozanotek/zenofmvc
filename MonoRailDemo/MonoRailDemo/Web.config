<?xml version="1.0"?>

<configuration>

    <configSections>
        <section name="monorail" type="Castle.MonoRail.Framework.Configuration.MonoRailSectionHandler, Castle.MonoRail.Framework" />
        <section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
    </configSections>
    <!-- 
        For more on monoRail configuration see 
		          http://www.castleproject.org/monorail/documentation/v1rc2/index.html
    -->
    <monorail useWindsorIntegration="true">
        <viewEngine viewPathRoot="Views" 
                    customEngine="Castle.MonoRail.Framework.Views.NVelocity.NVelocityViewEngine, Castle.MonoRail.Framework.Views.NVelocity" />
        <!--For more information on routing see http://www.castleproject.org/monorail/documentation/trunk/advanced/routing.html-->
        <routing>
            <rule>
                <pattern>(/person/edit/)(\w+)$</pattern>
                <replace><![CDATA[ /person/edit.rails?id=$2 ]]></replace>
            </rule>
            <rule>
                <pattern>(/person/delete/)(\w+)$</pattern>
                <replace><![CDATA[ /person/delete.rails?id=$2 ]]></replace>
            </rule>
        </routing>
    </monorail>
    <system.web>
        <compilation debug ="true" />

        <httpHandlers>
            <add verb="*" path="*.rails" type="Castle.MonoRail.Framework.MonoRailHttpHandlerFactory, Castle.MonoRail.Framework" />
            <!-- block direct user access to template files -->
            <add verb="*" path="*.vm" type="System.Web.HttpForbiddenHandler" />
        </httpHandlers>
        <httpModules>
            <add name="monorail" type="Castle.MonoRail.Framework.EngineContextModule, Castle.MonoRail.Framework" />
            <add name="routing" type="Castle.MonoRail.Framework.RoutingModule, Castle.MonoRail.Framework" />
        </httpModules>
    </system.web>
    <!--Container configuration. For more information see http://www.castleproject.org/index.php/IoC:Configuration-->
    <!--and http://www.castleproject.org/index.php/IoC:Component_parameters%2C_configuration_and_type_converters-->
    <castle>
        <include uri="file://__config/facilities.config" />
        <include uri="file://__config/controllers.config" />
        <include uri="file://__config/components.config" />
    </castle>

</configuration>
